# System Footprint & URL Map for SureCRM

## 1. 주요 흐름 (Key Flows)

- **소개 관계 네트워킹**: 보험설계사가 "누가 누구를 소개했는지" 시각적으로 체계화하고 핵심 소개자를 발견하는 핵심 흐름
- **고객 데이터 온보딩**: 기존 고객 데이터를 가져오고(CSV, 엑셀 등) 소개 관계를 설정하여 30분 내에 가치를 느끼게 하는 흐름
- **영업 파이프라인 관리**: 칸반보드 방식으로 고객을 영업 단계별(첫 상담, 상품 설명, 계약 검토, 완료 등)로 체계적으로 관리하는 흐름
- **미팅 & 일정 관리**: 구글 캘린더와 양방향 연동하여 고객 미팅을 관리하고 관련 정보를 쉽게 접근하는 흐름
- **초대 기반 커뮤니티 확장**: 클럽하우스 스타일의 초대장(2장)을 통해 서비스를 보험설계사 커뮤니티 내에 유기적으로 확산시키는 흐름

## 2. 사용자가 방문할 URL/페이지

| Page Name       | URL Path             | Purpose (페이지 목적)                                    | Access Level (접근 권한)  |
| --------------- | -------------------- | -------------------------------------------------------- | ------------------------- |
| 대시보드        | `/`                  | 오늘의 미팅, 핵심 소개자, 파이프라인 현황을 한눈에 파악  | 초대 사용자               |
| 로그인          | `/login`             | 사용자 인증                                              | 비인증 사용자             |
| 초대 안내       | `/invite-only`       | 서비스가 초대 전용임을 안내하고 초대 획득 방법 소개      | 비인증 사용자             |
| 초대 수락       | `/invite/:code`      | 초대장을 통한 서비스 가입 프로세스                       | 비인증 사용자             |
| 비밀번호 복구   | `/recover`           | 계정 비밀번호 재설정                                     | 비인증 사용자             |
| 초기 설정       | `/onboarding`        | 최초 로그인 시 고객 데이터 임포트 및 소개 관계 설정 안내 | 초대 사용자 (최초 로그인) |
| 소개 네트워크   | `/network`           | 옵시디언 스타일 그래프 뷰로 고객 소개 관계 시각화        | 초대 사용자               |
| 영업 파이프라인 | `/pipeline`          | 칸반보드 방식의 단계별 고객 관리                         | 초대 사용자               |
| 고객 목록       | `/clients`           | 모든 고객 조회, 검색, 필터링                             | 초대 사용자               |
| 고객 상세       | `/clients/:id`       | 개별 고객 정보 및 활동 관리                              | 초대 사용자               |
| 고객 추가/편집  | `/clients/edit/:id?` | 신규 고객 추가 또는 기존 고객 정보 수정                  | 초대 사용자               |
| 캘린더          | `/calendar`          | 미팅 일정 관리 및 구글 캘린더 연동                       | 초대 사용자               |
| 핵심 소개자     | `/influencers`       | 가장 많은 소개를 제공한 고객 분석 및 관리                | 초대 사용자               |
| 데이터 임포트   | `/import`            | CSV, 엑셀, 구글 연락처 등에서 고객 데이터 가져오기       | 초대 사용자               |
| 초대장 관리     | `/invitations`       | 초대장 발급 및 추적 관리                                 | 초대 사용자               |
| 팀 관리         | `/team`              | 팀원 관리 및 팀 설정                                     | 팀 관리자                 |
| 팀 합류         | `/team/join/:code`   | 팀 초대 코드를 통한 기존 팀 합류                         | 초대 사용자               |
| 보고서          | `/reports`           | 소개 네트워크 및 영업 성과 보고서                        | 초대 사용자               |
| 설정            | `/settings`          | 계정 및 앱 환경설정                                      | 초대 사용자               |
| 404 오류        | `/404`               | 존재하지 않는 페이지 접근 시 오류 안내                   | 모든 사용자               |
| 서비스 이용약관 | `/terms`             | 서비스 이용약관 및 개인정보처리방침                      | 모든 사용자               |

## 3. 각 페이지에서 가능한 사용자 행동

### 대시보드 (`/`)

- 오늘/내일 예정된 고객 미팅 확인 및 빠른 준비 노트 작성
- 파이프라인 단계별 고객 수 및 진행 상황 요약 그래프 확인
- 핵심 소개자 TOP 5와 이들이 소개한 고객 수 및 계약 전환율 확인
- 최근 소개 활동 피드 확인 (새로운 소개 관계, 단계 변경 등)
- 주간 영업 목표 대비 현재 진행 상황 확인
- 그래프 뷰 미리보기로 최근 추가된 소개 관계 시각적 확인
- 빠른 액션 버튼 (고객 추가, 미팅 예약, 소개 관계 추가)
- 팀 멤버인 경우 팀 전체 핵심 지표 동향 확인

### 소개 네트워크 (`/network`)

- 옵시디언 스타일의 인터랙티브 그래프 뷰로 모든 고객 간 소개 관계 시각화
- 그래프 확대/축소, 이동, 재배치를 통한 네트워크 탐색
- 특정 고객 노드 선택 시 관련된 1촌, 2촌 소개 관계 하이라이트
- 노드 클릭으로 고객 핵심 정보 미니 패널 표시 (이름, 연락처, 소개 수, 현재 단계)
- 소개 깊이 필터링 (직접 소개만, 2단계까지, 전체 등)
- 영업 단계별 노드 색상 구분 및 필터링
- "소개 경로 찾기" 기능으로 두 고객 간 소개 연결 경로 하이라이트
- 미니맵을 통한 대규모 네트워크 내 현재 위치 확인
- 소개 가능성이 높은 잠재적 연결 추천 (점선으로 표시, MVP 후속 기능)
- 그래프 현재 뷰 이미지 저장 및 공유
- 그래프에서 직접 고객 카드로 드래그하여 소개 관계 설정

### 영업 파이프라인 (`/pipeline`)

- 보험설계사 워크플로우에 최적화된 기본 단계 제공 (첫 상담, 니즈 분석, 상품 설명, 계약 검토, 계약 완료)
- 고객 카드를 드래그 앤 드롭으로 단계 간 이동
- 단계별 고객 수 및 예상 계약 금액 자동 합계 표시
- 고객 카드에 중요 정보 요약 표시 (이름, 연락처, 소개자, 다음 미팅, 메모)
- 카드 색상 태그로 우선순위 또는 고객 유형 구분
- 소개자별 필터링으로 특정 소개자의 소개 고객만 표시
- 단계별 평균 체류 시간 및 전환율 통계 표시
- 고객 카드에서 직접 미팅 예약, 메모 추가, 단계 변경 가능
- 고객 카드 클릭으로 상세 정보 사이드 패널 열기
- 새 고객 직접 추가 및 소개 관계 즉시 설정
- 칸반보드 뷰/리스트 뷰 토글

### 고객 목록 (`/clients`)

- 모든 고객 리스트형 조회 (페이지네이션 지원)
- 다중 필터 적용 (이름, 소개자, 영업 단계, 마지막 접촉일 등)
- 커스텀 정렬 (최근 추가, 소개 많은 순, 계약 금액 등)
- 고객 카드 호버 시 상세 정보 미리보기
- 신규 고객 추가 (소개 관계 설정 포함)
- 다중 선택 및 일괄 작업 (단계 변경, 태그 추가/제거, 담당자 변경)
- 고객 데이터 엑셀/CSV 내보내기
- 소개 관계별 트리 뷰 전환 (소개자 중심 계층 구조)
- 빠른 검색 (이름, 전화번호, 이메일) 및 태그 기반 필터링
- 목록에서 바로 고객 상세 페이지 이동 또는 빠른 액션 메뉴 사용

### 고객 상세 (`/clients/:id`)

- 고객 기본 정보 조회 및 인라인 편집 (이름, 연락처, 주소, 직업 등)
- 소개 관계 정보 표시 및 관리 (소개자/피소개자 목록)
- 미니 그래프 뷰로 현재 고객 중심의 소개 네트워크 시각화
- 영업 단계 변경 및 단계별 히스토리 타임라인
- 과거 미팅 기록 및 다가오는 미팅 일정 관리
- 활동 로그 타임라인 (상태 변경, 메모 추가, 연락 기록 등)
- 고객 관련 파일/문서 업로드 및 관리
- 고객별 메모 및 특이사항 기록
- 리마인더/알림 설정 (생일, 기념일, 계약 갱신일 등)
- 직접 연락 액션 바로가기 (전화, 문자, 이메일)
- 추가 소개 요청 스크립트 생성 및 기록
- 고객 태그 관리 및 중요도 설정

### 캘린더 (`/calendar`)

- 일/주/월 단위 캘린더 뷰 전환
- 구글 캘린더 양방향 자동 동기화
- 미팅 유형별 색상 구분 (첫 상담, 상품 설명, 계약 체결 등)
- 드래그 앤 드롭으로 일정 생성 및 이동
- 미팅별 고객 연결 및 준비 노트 작성
- 반복 일정 설정 (정기 미팅, 팔로업 등)
- 미팅 전/당일 알림 설정 (푸시, 이메일, SMS)
- 미팅 종료 후 결과 기록 및 다음 단계 액션 설정
- 캘린더에서 고객 정보로 바로 이동
- 특정 고객/소개자 필터링으로 관련 일정만 표시
- 팀 캘린더 통합 뷰 (팀원 일정 함께 보기)

### 핵심 소개자 (`/influencers`)

- 소개 건수별 상위 고객 랭킹 및 상세 분석
- 소개 네트워크 영향력 시각화 (소개한 고객들의 계약 전환율 포함)
- 핵심 소개자별 맞춤 관리 전략 및 감사 표현 알림
- 소개의 소개 (2단계) 영향력 분석
- 소개 패턴 및 성공률 통계
- 소개자별 영업 파이프라인 전환율 비교
- 최근 활동이 없는 과거 핵심 소개자 알림
- 소개자 세그먼트별 맞춤 전략 추천
- 소개자 감사 프로그램 관리 및 기록
- 잠재적 핵심 소개자 발굴 추천

### 데이터 임포트 (`/import`)

- 다양한 소스 지원 (CSV, 엑셀, 구글 연락처, 메모앱 등)
- 드래그 앤 드롭 파일 업로드 또는 파일 선택기
- 필드 매핑 마법사 (시스템 필드와 소스 데이터 연결)
- 데이터 미리보기 및 검증
- 중복 고객 감지 및 처리 옵션 (병합, 건너뛰기, 별도 관리)
- 소개 관계 일괄 설정 인터페이스
- 단계별 임포트 진행 상태 표시
- 임포트 결과 요약 및 오류 리포트
- 가져온 데이터의 빠른 확인 및 편집
- 임포트 템플릿 다운로드 및 재사용
- 임포트 히스토리 및 롤백 옵션

### 초대장 관리 (`/invitations`)

- 현재 보유 중인 초대장 수량 확인 (기본 2장)
- 초대장 발급 (이메일 입력 또는 링크/QR코드 생성)
- 발급한 초대장 상태 추적 (대기 중/사용 완료/만료됨)
- 초대를 통해 가입한 사용자 목록 및 활동 개요
- 미사용 초대장 취소 또는 재발송
- 초대 네트워크 시각화 (내가 초대한 사람 → 그들이 초대한 사람)
- 초대장 사용 기한 (발급 후 7일) 표시 및 알림
- 초대 메시지 커스터마이징
- 초대장 공유 옵션 (메신저, 이메일, 문자)
- MVP 단계 설명 및 향후 서비스 로드맵 안내

### 팀 관리 (`/team`) - 팀 관리자용

- 팀 구성원 목록 및 상태 확인
- 새 팀원 초대 (이메일 초대 링크)
- 팀원 권한 설정 (관리자, 일반 멤버)
- 팀 공유 설정 (데이터 공유 범위 및 접근 권한)
- 팀 성과 대시보드 및 비교 분석
- 팀원별 활동 로그 및 통계
- 팀 리소스 관리 (공통 템플릿, 문서 등)
- 팀 공지사항 작성 및 알림
- 팀 캘린더 통합 및 일정 조율
- 팀 목표 설정 및 진행 상황 추적

### 보고서 (`/reports`)

- 기간별 영업 성과 요약 (일/주/월/분기별)
- 소개 네트워크 효과성 분석 (소개 경로별 계약 전환율)
- 파이프라인 단계별 전환율 및 체류 시간 분석
- 핵심 소개자 기여도 및 영향력 분석
- 활동 기반 성과 상관관계 (미팅 수, 연락 빈도 등)
- 고객 세그먼트별 성과 비교
- 시간대별/요일별 고객 반응률 분석
- 맞춤형 보고서 템플릿 저장 및 재사용
- 보고서 PDF/엑셀 내보내기
- 대시보드 위젯으로 주요 지표 핀 고정
- 팀 관리자용 팀 성과 비교 분석 (MVP 이후)

### 설정 (`/settings`)

- 계정 정보 관리 (이름, 이메일, 프로필 사진, 비밀번호 변경)
- 알림 환경설정 (푸시, 이메일, SMS별 알림 유형 설정)
- 구글 캘린더 연동 설정 및 동기화 옵션
- 영업 파이프라인 단계 커스터마이징
- 고객 필드 및 태그 관리 (사용자 정의 필드 추가)
- 데이터 백업 및 내보내기 옵션
- 앱 테마 설정 (라이트/다크 모드)
- 언어 설정 (한국어/영어)
- 개인정보 보호 및 보안 설정
- 사용 통계 및 피드백 제공 옵션

## 4. 사용자 역할 및 권한

- **초대 사용자**: MVP 단계에서는 초대장을 통해서만 서비스 가입 가능. 모든 사용자는 가입 시 2장의 초대장을 받으며 이를 통해 다른 보험설계사 초대 가능. 자신의 고객 데이터와 소개 네트워크에 대한 모든 권한 보유.

- **팀 관리자**: 팀을 생성하고 관리할 수 있는 확장 권한 보유. 팀원 초대, 팀 설정 구성, 팀 대시보드 관리, 팀 전체 데이터 접근 가능. 팀원들의 활동 로그 및 성과 지표 확인 가능.

- **팀 멤버**: 팀에 소속된 일반 사용자로, 자신의 고객 데이터는 완전히 관리하면서 팀 내 공유 설정된 데이터에 접근 가능. 팀 대시보드 조회 및 팀 리소스 활용 가능하지만 팀 설정 변경은 불가.

- **시스템 관리자**: 백오피스 접근 권한을 가진 개발/운영팀으로, 초기 사용자 초대 및 전체 시스템 관리 담당. MVP 단계에서는 개발자가 직접 이 역할 수행.

## 5. 엣지 케이스 및 오류 처리

### 초대장 시스템 관련

- **초대 전용 서비스 안내**: 초대장 없이 가입 시도 시 서비스 소개 및 초대장 획득 방법 안내 페이지(`/invite-only`) 제공
- **초대 코드 유효성**: 만료되거나 이미 사용된 초대 코드에 대해 친절한 오류 메시지와 대안 제시
- **초대 계보 추적**: 초대 체인(A→B→C)을 추적하여 서비스 확산 패턴 분석 및 사용자에게 초대 네트워크 시각화
- **최초 사용자 특별 처리**: 첫 사용자(보험설계사 친구)에 대한 특별 온보딩 및 피드백 수집 프로세스
- **초대장 만료 관리**: 7일 후 미사용 초대장 자동 만료 및 발급자에게 알림

### 데이터 및 시각화 관련

- **대용량 네트워크 처리**: 100명 이상의 노드가 있는 경우 그래프 뷰 최적화 (클러스터링, 점진적 로딩)
- **복잡한 소개 관계**: 다중 소개자 처리 (A와 B가 모두 C를 소개한 경우) 및 UI에서 명확히 표현
- **소개 관계 순환**: A→B→C→A 같은 순환 참조 발생 시 감지 및 시각적 표시
- **중복 고객 데이터**: 임포트 과정에서 동일인 판단 기준 제공 (이름+전화번호/이메일) 및 병합 옵션
- **오프라인 지원**: 주요 고객 데이터 및 미팅 정보 오프라인 캐싱으로 네트워크 불안정 상황 대비

### 사용자 경험 예외 처리

- **온보딩 최적화**: 첫 사용자를 위한 빈 상태(empty state) 화면 및 단계별 가이드 제공
- **모바일 응답형 설계**: 작은 화면에서도 그래프 뷰 및 칸반보드의 사용성 보장
- **비전문가 배려**: 기술적 용어 대신 보험설계사에게 친숙한 언어 사용
- **데이터 입력 최소화**: 반복 정보 자동 완성 및 최소 필수 필드로 사용 허들 낮춤
- **점진적 기능 공개**: 초기 핵심 기능 습득 후 고급 기능 안내로 사용자 학습 곡선 관리

### HTTP 에러 처리

- **400 Bad Request**: "입력 정보에 문제가 있어요. 다시 확인해볼까요?" 등 친절한 메시지와 구체적 오류 지점 하이라이트
- **401 Unauthorized**: 세션 만료 시 "로그인 정보가 만료되었습니다" 안내와 자동 로그인 페이지 리디렉션, 현재 작업 임시 저장
- **403 Forbidden**: "이 기능을 사용할 권한이 없습니다" 메시지와 권한 요청 방법 또는 대시보드 복귀 옵션 제공
- **404 Not Found**: 보험 테마 유머러스한 메시지 ("이 페이지는 좋은 고객 소개처럼 찾기 어렵네요") 및 주요 메뉴 바로가기 제공
- **500 Server Error**: "시스템 점검 중입니다" 메시지와 자동 오류 보고, 대안적 액션 제안 및 예상 복구 시간 안내

### 보안 및 데이터 보호

- **고객 데이터 암호화**: 민감한 고객 개인정보 암호화 저장 및 전송
- **데이터 백업**: 일일 자동 백업 및 사용자 요청 시 수동 백업 지원
- **권한 세분화**: 팀 내에서도 고객 데이터 접근 권한 세밀하게 제어
- **활동 로깅**: 중요 데이터 변경 시 감사 추적을 위한 활동 로깅
- **비정상 접근 탐지**: 의심스러운 로그인 시도 감지 및 알림
- **개인정보 처리방침**: 명확한 개인정보 처리방침 및 데이터 활용 범위 안내

### 통합 및 동기화 이슈

- **캘린더 동기화 충돌**: 구글 캘린더와 SureCRM 간 일정 충돌 해결 로직
- **API 한도 관리**: 외부 서비스(구글 캘린더 등) API 호출 제한 관리 및 대안 흐름
- **다중 기기 동기화**: 여러 기기에서 동시 접근 시 데이터 동기화 충돌 해결
- **브라우저 호환성**: 다양한 브라우저 지원 및 호환성 이슈 처리
- **네트워크 불안정**: 약한 연결 또는 연결 끊김 상태에서의 우아한 복구 메커니즘

이 System Footprint & URL Map은 보험설계사들의 핵심 니즈인 "소개 관계 시각화"와 "영업 파이프라인 관리"에 중점을 두고, 클럽하우스 스타일의 초대장 시스템을 통한 MVP 확산 전략을 반영하여 설계되었습니다. 모든 기능과 페이지는 "누가 누구를 소개했는지"를 체계적으로 관리하여 영업 성과를 높이는 핵심 가치에 집중하고 있습니다.
