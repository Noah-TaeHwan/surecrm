# 🔔 보험 CRM 자동 알림 이벤트 명세서

## 📋 개요

사용자(보험설계사)가 CRM을 사용하면서 **자연스럽게 발생하는 이벤트들**에 대해 **자동으로 알림**을 보내는 시스템입니다.
프로덕트헌트처럼 "댓글이 달리면 알림이 온다"는 개념과 동일합니다.

---

## 🎯 **1. 고객 관련 알림 이벤트**

### 🎂 **1-1. 고객 생일 알림**

**트리거 조건:**

- 고객의 생일 3일 전 (오전 9시)
- 고객의 생일 당일 (오전 9시)

**알림 내용:**

```
📅 3일 전: "김영희님의 생일이 3일 후입니다 (12월 25일)"
🎂 당일: "오늘은 김영희님의 생일입니다! 축하 메시지를 보내보세요"
```

**우선순위:** `normal`
**채널:** `in_app`, `email` (설정에 따라)

---

### 👨‍👩‍👧‍👦 **1-2. 고객 가족 생일 알림**

**트리거 조건:**

- 고객이 등록한 가족 구성원의 생일 당일

**알림 내용:**

```
🎉 "김영희님의 딸 김민지님이 오늘 생일입니다"
```

**우선순위:** `low`
**채널:** `in_app`

---

### 📞 **1-3. 고객 접촉 지연 알림**

**트리거 조건:**

- 마지막 접촉 후 7일 경과 (중요도: 높음)
- 마지막 접촉 후 14일 경과 (중요도: 보통)
- 마지막 접촉 후 30일 경과 (모든 고객)

**알림 내용:**

```
⏰ "김영희님과 7일간 연락이 없습니다. 안부 확인이 필요합니다"
📞 "중요 고객 이철수님과 14일간 미접촉 상태입니다"
🚨 "박지민님과 30일간 연락이 없습니다. 즉시 연락하세요"
```

**우선순위:** `normal` → `high` → `urgent`

---

## 🎯 **2. 영업 파이프라인 관련 알림**

### ⏰ **2-1. 파이프라인 단계 지연 알림**

**트리거 조건:**

- 같은 파이프라인 단계에 7일 이상 머물러 있는 경우
- 같은 파이프라인 단계에 14일 이상 머물러 있는 경우

**알림 내용:**

```
📈 "김영희님이 '상담 중' 단계에 7일째 머물러 있습니다"
🚨 "이철수님이 '계약 검토' 단계에 14일째 정체 중입니다"
```

**우선순위:** `normal` → `high`

---

### 🔥 **2-2. 계약 임박 고객 알림**

**트리거 조건:**

- "계약 체결" 단계에 진입한 고객
- "계약 체결" 단계에서 3일 이상 진전 없는 경우

**알림 내용:**

```
✨ "김영희님이 계약 체결 단계에 진입했습니다!"
🔥 "이철수님의 계약이 3일째 지연되고 있습니다. 즉시 연락하세요"
```

**우선순위:** `high` → `urgent`

---

### 📊 **2-3. 월말 실적 알림**

**트리거 조건:**

- 매월 마지막 주 월요일 (월말 실적 리마인드)
- 매월 마지막 3일 (긴급 실적 점검)

**알림 내용:**

```
📊 "이번 달 계약 현황: 3건 완료, 5건 진행 중"
🚨 "월말 3일 남음! 계약 임박 고객 2명을 집중 관리하세요"
```

**우선순위:** `normal` → `high`

---

## 🎯 **3. 팀 협업 관련 알림**

### 👥 **3-1. 초대장 사용 알림**

**트리거 조건:**

- 내가 발송한 초대장을 누군가 사용하여 회원가입 완료

**알림 내용:**

```
🎉 "김영희님이 회원가입을 완료했습니다! (추천인: 나)"
```

**우선순위:** `normal`

---

### 📨 **3-2. 팀 멤버 활동 알림**

**트리거 조건:**

- 같은 팀 멤버가 새로운 고객 등록
- 같은 팀 멤버가 계약 완료

**알림 내용:**

```
👥 "팀원 이철수님이 새 고객을 등록했습니다"
🎊 "팀원 박지민님이 계약을 완료했습니다!"
```

**우선순위:** `low`

---

## 🎯 **4. 일정 및 미팅 관련 알림**

### 📅 **4-1. 미팅 리마인더**

**트리거 조건:**

- 미팅 1시간 전
- 미팅 10분 전

**알림 내용:**

```
📅 "1시간 후 김영희님과 미팅이 있습니다"
⏰ "10분 후 이철수님과 미팅 시작입니다"
```

**우선순위:** `high` → `urgent`

---

### 📝 **4-2. 미팅 후 후속조치 알림**

**트리거 조건:**

- 미팅 완료 후 24시간 경과 (후속조치 미등록시)

**알림 내용:**

```
📝 "김영희님과의 미팅 후속조치를 등록해주세요"
```

**우선순위:** `normal`

---

## 🎯 **5. 보험 상품 및 계약 관련 알림**

### 📋 **5-1. 보험 만료 예정 알림**

**트리거 조건:**

- 기존 고객의 보험 만료 30일 전
- 기존 고객의 보험 만료 7일 전

**알림 내용:**

```
📋 "김영희님의 생명보험이 30일 후 만료됩니다"
🚨 "이철수님의 건강보험이 7일 후 만료됩니다!"
```

**우선순위:** `normal` → `high`

---

### 💰 **5-2. 보험료 납입 지연 알림**

**트리거 조건:**

- 보험료 납입일 경과 (고객이 알려준 경우)

**알림 내용:**

```
💰 "김영희님의 보험료 납입일이 지났습니다. 확인 필요"
```

**우선순위:** `high`

---

## 🎯 **6. 시스템 및 기타 알림**

### 🔔 **6-1. 목표 달성 알림**

**트리거 조건:**

- 월간 계약 목표 달성
- 분기별 실적 목표 달성

**알림 내용:**

```
🎉 "축하합니다! 이번 달 계약 목표를 달성했습니다"
🏆 "분기 실적 목표를 달성했습니다!"
```

**우선순위:** `normal`

---

### ⚠️ **6-2. 시스템 업데이트 알림**

**트리거 조건:**

- 새로운 기능 추가
- 중요한 시스템 변경사항

**알림 내용:**

```
✨ "새로운 고객 관리 기능이 추가되었습니다"
⚠️ "시스템 점검이 예정되어 있습니다 (12월 25일 02:00-04:00)"
```

**우선순위:** `low` → `normal`

---

## 🎯 **구현 우선순위**

### **Phase 1 (최우선)** 🔥

1. 고객 생일 알림 (3일 전, 당일)
2. 파이프라인 단계 지연 알림
3. 계약 임박 고객 알림
4. 미팅 리마인더

### **Phase 2 (중요)** ⭐

1. 고객 접촉 지연 알림
2. 초대장 사용 알림
3. 월말 실적 알림
4. 미팅 후속조치 알림

### **Phase 3 (보완)** 📝

1. 고객 가족 생일 알림
2. 팀 멤버 활동 알림
3. 보험 만료 예정 알림
4. 목표 달성 알림

---

## 💡 **기술적 구현 방안**

1. **데이터베이스 트리거**: 특정 이벤트 발생 시 자동 실행
2. **스케줄러**: 매일 정해진 시간에 조건 체크
3. **웹훅**: 외부 시스템 연동 시 실시간 알림
4. **실시간 알림**: WebSocket 또는 Server-Sent Events

이제 이 명세서를 바탕으로 **실제 자동 알림 시스템**을 구현해보겠습니다!
