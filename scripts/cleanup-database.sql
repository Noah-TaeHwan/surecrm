-- Supabase Public 스키마 정리 스크립트
-- 모든 테이블과 enum 타입들을 삭제합니다

-- 1. 모든 테이블 삭제 (CASCADE로 의존성까지 함께 삭제)
DROP TABLE IF EXISTS public.team_templates CASCADE;
DROP TABLE IF EXISTS public.team_performance CASCADE;
DROP TABLE IF EXISTS public.team_members CASCADE;
DROP TABLE IF EXISTS public.team_knowledge_base CASCADE;
DROP TABLE IF EXISTS public.team_goals CASCADE;
DROP TABLE IF EXISTS public.team_collaborations CASCADE;
DROP TABLE IF EXISTS public.team_announcements CASCADE;
DROP TABLE IF EXISTS public.team_activities CASCADE;
DROP TABLE IF EXISTS public.user_settings CASCADE;
DROP TABLE IF EXISTS public.team_settings CASCADE;
DROP TABLE IF EXISTS public.system_settings CASCADE;
DROP TABLE IF EXISTS public.integrations CASCADE;
DROP TABLE IF EXISTS public.feature_flags CASCADE;
DROP TABLE IF EXISTS public.backup_configurations CASCADE;
DROP TABLE IF EXISTS public.audit_logs CASCADE;
DROP TABLE IF EXISTS public.api_keys CASCADE;
DROP TABLE IF EXISTS public.report_templates CASCADE;
DROP TABLE IF EXISTS public.report_subscriptions CASCADE;
DROP TABLE IF EXISTS public.report_schedules CASCADE;
DROP TABLE IF EXISTS public.report_metrics CASCADE;
DROP TABLE IF EXISTS public.report_instances CASCADE;
DROP TABLE IF EXISTS public.report_exports CASCADE;
DROP TABLE IF EXISTS public.report_dashboards CASCADE;
DROP TABLE IF EXISTS public.stage_templates CASCADE;
DROP TABLE IF EXISTS public.stage_history CASCADE;
DROP TABLE IF EXISTS public.pipeline_views CASCADE;
DROP TABLE IF EXISTS public.pipeline_goals CASCADE;
DROP TABLE IF EXISTS public.pipeline_bottlenecks CASCADE;
DROP TABLE IF EXISTS public.pipeline_automations CASCADE;
DROP TABLE IF EXISTS public.pipeline_analytics CASCADE;
DROP TABLE IF EXISTS public.notification_templates CASCADE;
DROP TABLE IF EXISTS public.notification_subscriptions CASCADE;
DROP TABLE IF EXISTS public.notification_settings CASCADE;
DROP TABLE IF EXISTS public.notification_rules CASCADE;
DROP TABLE IF EXISTS public.notification_queue CASCADE;
DROP TABLE IF EXISTS public.notification_history CASCADE;
DROP TABLE IF EXISTS public.network_opportunities CASCADE;
DROP TABLE IF EXISTS public.network_nodes CASCADE;
DROP TABLE IF EXISTS public.network_interactions CASCADE;
DROP TABLE IF EXISTS public.network_events CASCADE;
DROP TABLE IF EXISTS public.network_connections CASCADE;
DROP TABLE IF EXISTS public.network_analysis_results CASCADE;
DROP TABLE IF EXISTS public.invitation_waitlist CASCADE;
DROP TABLE IF EXISTS public.invitation_usage_logs CASCADE;
DROP TABLE IF EXISTS public.invitation_templates CASCADE;
DROP TABLE IF EXISTS public.invitation_rewards CASCADE;
DROP TABLE IF EXISTS public.invitation_referral_tracking CASCADE;
DROP TABLE IF EXISTS public.invitation_campaigns CASCADE;
DROP TABLE IF EXISTS public.invitation_analytics CASCADE;
DROP TABLE IF EXISTS public.referral_patterns CASCADE;
DROP TABLE IF EXISTS public.network_analysis CASCADE;
DROP TABLE IF EXISTS public.influencer_profiles CASCADE;
DROP TABLE IF EXISTS public.gratitude_templates CASCADE;
DROP TABLE IF EXISTS public.gratitude_history CASCADE;
DROP TABLE IF EXISTS public.quick_actions CASCADE;
DROP TABLE IF EXISTS public.performance_metrics CASCADE;
DROP TABLE IF EXISTS public.notifications CASCADE;
DROP TABLE IF EXISTS public.goals CASCADE;
DROP TABLE IF EXISTS public.dashboard_widgets CASCADE;
DROP TABLE IF EXISTS public.activity_logs CASCADE;
DROP TABLE IF EXISTS public.client_tags CASCADE;
DROP TABLE IF EXISTS public.client_tag_assignments CASCADE;
DROP TABLE IF EXISTS public.client_preferences CASCADE;
DROP TABLE IF EXISTS public.client_milestones CASCADE;
DROP TABLE IF EXISTS public.client_family_members CASCADE;
DROP TABLE IF EXISTS public.client_contact_history CASCADE;
DROP TABLE IF EXISTS public.client_analytics CASCADE;
DROP TABLE IF EXISTS public.recurring_meetings CASCADE;
DROP TABLE IF EXISTS public.meeting_templates CASCADE;
DROP TABLE IF EXISTS public.meeting_reminders CASCADE;
DROP TABLE IF EXISTS public.meeting_notes CASCADE;
DROP TABLE IF EXISTS public.meeting_checklists CASCADE;
DROP TABLE IF EXISTS public.meeting_attendees CASCADE;
DROP TABLE IF EXISTS public.features_calendar_sharing CASCADE;
DROP TABLE IF EXISTS public.features_calendar_settings CASCADE;
DROP TABLE IF EXISTS public.features_calendar_recurring_meetings CASCADE;
DROP TABLE IF EXISTS public.features_calendar_meetings CASCADE;
DROP TABLE IF EXISTS public.features_calendar_meeting_templates CASCADE;
DROP TABLE IF EXISTS public.features_calendar_meeting_reminders CASCADE;
DROP TABLE IF EXISTS public.features_calendar_meeting_notes CASCADE;
DROP TABLE IF EXISTS public.features_calendar_meeting_checklists CASCADE;
DROP TABLE IF EXISTS public.features_calendar_meeting_attendees CASCADE;
DROP TABLE IF EXISTS public.features_calendar_events CASCADE;
DROP TABLE IF EXISTS public.calendar_settings CASCADE;
DROP TABLE IF EXISTS public.testimonials CASCADE;
DROP TABLE IF EXISTS public.site_settings CASCADE;
DROP TABLE IF EXISTS public.public_contents CASCADE;
DROP TABLE IF EXISTS public.page_views CASCADE;
DROP TABLE IF EXISTS public.faqs CASCADE;
DROP TABLE IF EXISTS public.common_user_settings CASCADE;
DROP TABLE IF EXISTS public.common_testimonials CASCADE;
DROP TABLE IF EXISTS public.common_teams CASCADE;
DROP TABLE IF EXISTS public.common_team_settings CASCADE;
DROP TABLE IF EXISTS public.common_system_settings CASCADE;
DROP TABLE IF EXISTS public.common_site_settings CASCADE;
DROP TABLE IF EXISTS public.common_public_contents CASCADE;
DROP TABLE IF EXISTS public.common_profiles CASCADE;
DROP TABLE IF EXISTS public.common_integrations CASCADE;
DROP TABLE IF EXISTS public.common_feature_flags CASCADE;
DROP TABLE IF EXISTS public.common_faqs CASCADE;
DROP TABLE IF EXISTS public.common_backup_configurations CASCADE;
DROP TABLE IF EXISTS public.common_audit_logs CASCADE;
DROP TABLE IF EXISTS public.common_api_keys CASCADE;
DROP TABLE IF EXISTS public.common_announcements CASCADE;
DROP TABLE IF EXISTS public.announcements CASCADE;
DROP TABLE IF EXISTS public.teams CASCADE;
DROP TABLE IF EXISTS public.referrals CASCADE;
DROP TABLE IF EXISTS public.profiles CASCADE;
DROP TABLE IF EXISTS public.pipeline_stages CASCADE;
DROP TABLE IF EXISTS public.meetings CASCADE;
DROP TABLE IF EXISTS public.invitations CASCADE;
DROP TABLE IF EXISTS public.insurance_info CASCADE;
DROP TABLE IF EXISTS public.documents CASCADE;
DROP TABLE IF EXISTS public.clients CASCADE;
DROP TABLE IF EXISTS public.client_details CASCADE;

-- 2. 모든 enum 타입 삭제
DROP TYPE IF EXISTS public.user_role CASCADE;
DROP TYPE IF EXISTS public.importance CASCADE;
DROP TYPE IF EXISTS public.gender CASCADE;
DROP TYPE IF EXISTS public.insurance_type CASCADE;
DROP TYPE IF EXISTS public.meeting_type CASCADE;
DROP TYPE IF EXISTS public.meeting_status CASCADE;
DROP TYPE IF EXISTS public.referral_status CASCADE;
DROP TYPE IF EXISTS public.document_type CASCADE;
DROP TYPE IF EXISTS public.invitation_status CASCADE;
DROP TYPE IF EXISTS public.content_status CASCADE;
DROP TYPE IF EXISTS public.content_type CASCADE;
DROP TYPE IF EXISTS public.notification_type CASCADE;
DROP TYPE IF EXISTS public.notification_priority CASCADE;
DROP TYPE IF EXISTS public.activity_type CASCADE;
DROP TYPE IF EXISTS public.goal_status CASCADE;
DROP TYPE IF EXISTS public.metric_type CASCADE;
DROP TYPE IF EXISTS public.integration_status CASCADE;
DROP TYPE IF EXISTS public.backup_status CASCADE;
DROP TYPE IF EXISTS public.team_role CASCADE;
DROP TYPE IF EXISTS public.report_type CASCADE;
DROP TYPE IF EXISTS public.report_status CASCADE;
DROP TYPE IF EXISTS public.pipeline_stage_type CASCADE;
DROP TYPE IF EXISTS public.network_node_type CASCADE;
DROP TYPE IF EXISTS public.invitation_type CASCADE;
DROP TYPE IF EXISTS public.gratitude_type CASCADE;
DROP TYPE IF EXISTS public.client_status CASCADE;
DROP TYPE IF EXISTS public.calendar_event_type CASCADE;

-- 3. 모든 함수 삭제 (필요한 경우)
DROP FUNCTION IF EXISTS public.handle_new_user() CASCADE;
DROP FUNCTION IF EXISTS public.update_updated_at_column() CASCADE;

-- 4. 모든 트리거 삭제 (필요한 경우)
-- 트리거는 테이블과 함께 삭제되므로 별도 처리 불필요

-- 완료 메시지
SELECT 'Database cleanup completed successfully!' as message; 