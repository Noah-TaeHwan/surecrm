import { db } from '../../core/db.server';
import { publicContents } from '../../schema';
import { eq, and, desc } from 'drizzle-orm';

// 이용약관 데이터 타입
export interface TermsData {
  id: string;
  title: string;
  content: string;
  lastUpdated: string;
  version: string;
  effectiveDate: string;
}

// 개인정보처리방침 데이터 타입
export interface PrivacyPolicyData {
  id: string;
  title: string;
  content: string;
  lastUpdated: string;
  version: string;
  effectiveDate: string;
}

/**
 * 이용약관 데이터 가져오기
 */
export async function getTermsOfService(): Promise<TermsData> {
  try {
    const terms = await db
      .select({
        id: publicContents.id,
        title: publicContents.title,
        content: publicContents.content,
        version: publicContents.version,
        effectiveDate: publicContents.effectiveDate,
        updatedAt: publicContents.updatedAt,
      })
      .from(publicContents)
      .where(
        and(
          eq(publicContents.type, 'terms_of_service'),
          eq(publicContents.status, 'published'),
          eq(publicContents.language, 'ko')
        )
      )
      .orderBy(desc(publicContents.effectiveDate))
      .limit(1);

    if (terms.length > 0) {
      const term = terms[0];
      return {
        id: term.id,
        title: term.title,
        content: term.content,
        version: term.version,
        effectiveDate: term.effectiveDate
          ? new Date(term.effectiveDate).toISOString()
          : new Date().toISOString(),
        lastUpdated: new Date(term.updatedAt).toISOString(),
      };
    }

    // 기본 이용약관 반환
    return {
      id: 'default-terms',
      title: '서비스 이용약관',
      content: getDefaultTermsContent(),
      version: '1.0',
      effectiveDate: new Date().toISOString(),
      lastUpdated: new Date().toISOString(),
    };
  } catch (error) {
    console.error('이용약관 조회 실패:', error);
    return {
      id: 'default-terms',
      title: '서비스 이용약관',
      content: getDefaultTermsContent(),
      version: '1.0',
      effectiveDate: new Date().toISOString(),
      lastUpdated: new Date().toISOString(),
    };
  }
}

/**
 * 개인정보처리방침 데이터 가져오기
 */
export async function getPrivacyPolicy(): Promise<PrivacyPolicyData> {
  try {
    const privacy = await db
      .select({
        id: publicContents.id,
        title: publicContents.title,
        content: publicContents.content,
        version: publicContents.version,
        effectiveDate: publicContents.effectiveDate,
        updatedAt: publicContents.updatedAt,
      })
      .from(publicContents)
      .where(
        and(
          eq(publicContents.type, 'privacy_policy'),
          eq(publicContents.status, 'published'),
          eq(publicContents.language, 'ko')
        )
      )
      .orderBy(desc(publicContents.effectiveDate))
      .limit(1);

    if (privacy.length > 0) {
      const policy = privacy[0];
      return {
        id: policy.id,
        title: policy.title,
        content: policy.content,
        version: policy.version,
        effectiveDate: policy.effectiveDate
          ? new Date(policy.effectiveDate).toISOString()
          : new Date().toISOString(),
        lastUpdated: new Date(policy.updatedAt).toISOString(),
      };
    }

    // 기본 개인정보처리방침 반환
    return {
      id: 'default-privacy',
      title: '개인정보처리방침',
      content: getDefaultPrivacyContent(),
      version: '1.0',
      effectiveDate: new Date().toISOString(),
      lastUpdated: new Date().toISOString(),
    };
  } catch (error) {
    console.error('개인정보처리방침 조회 실패:', error);
    return {
      id: 'default-privacy',
      title: '개인정보처리방침',
      content: getDefaultPrivacyContent(),
      version: '1.0',
      effectiveDate: new Date().toISOString(),
      lastUpdated: new Date().toISOString(),
    };
  }
}

/**
 * 기본 이용약관 내용
 */
function getDefaultTermsContent(): string {
  return `
# SureCRM 서비스 이용약관

**시행일: 2025년 6월 26일**
**버전: 2.0**

## 제1장 총칙

### 제1조 (목적)
본 약관은 주식회사 슈어소프트(이하 '회사')가 제공하는 SureCRM 서비스(이하 '서비스')의 이용과 관련하여 회사와 회원 간의 권리, 의무 및 책임사항, 기타 필요한 사항을 규정함을 목적으로 합니다. 본 약관은 서비스 이용계약의 일부를 구성하며, 회원은 본 약관에 동의함으로써 서비스를 이용할 수 있습니다.

### 제2조 (용어의 정의)
본 약관에서 사용하는 용어의 정의는 다음과 같습니다. 본 약관에서 정의되지 않은 용어는 관련 법령 및 회사의 개별 서비스 운영정책에서 정하는 바에 따르며, 그 외에는 일반적인 상거래 관행에 따릅니다.

1. **서비스**: '회사'가 'SureCRM' 브랜드로 제공하는 고객 관계 관리(CRM) 솔루션 및 이와 관련된 모든 제반 서비스(웹 애플리케이션, 모바일 앱, API, 기술 지원, 컨설팅 등)를 의미합니다. 서비스의 구체적인 내용은 구독 플랜에 따라 상이할 수 있습니다.

2. **회사**: 본 약관에 따라 '서비스'를 제공하는 법인인 주식회사 슈어소프트를 의미합니다.

3. **회원**: 본 약관에 동의하고 회사와 서비스 이용계약을 체결한 개인 또는 법인을 의미합니다. 회원은 서비스 이용의 주체로서 본 약관에 따른 모든 권리와 의무를 부담합니다.

4. **최종 이용자**: '회원'에 의해 서비스 사용 권한을 부여받아 실제로 서비스를 이용하는 개인(예: 회원의 임직원)을 의미합니다. '회원'은 자신의 '최종 이용자'가 본 약관을 준수하도록 관리할 책임이 있습니다. B2B SaaS 환경에서 서비스 제공의 안정성과 책임 소재를 명확히 하기 위해, 계약의 주체인 '회원'과 실제 사용자인 '최종 이용자'를 구분하는 것은 필수적입니다. 이는 '회원'이 소속 '최종 이용자'의 행위에 대해 계약상 책임을 지게 함으로써, 서비스의 오남용을 방지하고 건전한 이용 환경을 조성하는 기반이 됩니다.

5. **계정**: '회원'이 서비스를 이용하기 위해 생성하는 고유한 식별 정보의 집합으로, 아이디와 비밀번호를 포함합니다. 계정의 관리 책임은 전적으로 '회원'에게 있습니다.

6. **아이디(ID)**: '회원' 식별과 서비스 이용을 위하여 '회원'이 선정하고 '회사'가 승인하는 문자, 숫자 또는 양자의 조합을 의미합니다.

7. **비밀번호**: '회원'의 동일성 확인과 정보 보호를 위해 '회원' 스스로가 설정한 문자, 숫자 또는 양자의 조합을 의미합니다.

8. **고객 데이터(Customer Data)**: '회원' 또는 '최종 이용자'가 서비스를 이용하는 과정에서 서버에 저장하거나 처리하기 위해 입력, 업로드, 전송하는 모든 전자적 데이터 및 정보(회원의 고객에 대한 개인정보 포함)를 의미합니다. '고객 데이터'의 소유권은 전적으로 '회원'에게 있습니다.

9. **콘텐츠**: '회원' 또는 '최종 이용자'가 서비스를 이용하면서 게시 또는 생성하는 모든 정보, 즉 텍스트, 이미지, 동영상, 파일 및 링크 등을 포괄적으로 의미합니다.

10. **유료 서비스**: '회원'이 '회사'에 별도의 이용 요금을 지불해야만 이용할 수 있는 서비스 또는 기능을 의미하며, 구독 플랜, 부가 기능 등이 이에 해당합니다.

11. **운영 정책**: 본 약관 외에 서비스의 특정 기능(예: 메시지 발송) 이용에 관한 세부 지침, 가이드라인 등 회사가 별도로 정하여 공지하는 규정을 의미합니다. 운영 정책은 본 약관의 일부를 구성합니다.

### 제3조 (약관의 명시, 효력 및 개정)
1. 회사는 본 약관의 내용과 상호, 대표자 성명, 영업소 소재지 주소, 사업자등록번호, 연락처(전화, 이메일 주소) 등을 회원이 쉽게 알 수 있도록 서비스 초기 화면 또는 연결 화면에 게시합니다.

2. 본 약관은 회원이 서비스 가입 시 동의함으로써 효력이 발생합니다.

3. 회사는 「약관의 규제에 관한 법률」, 「정보통신망 이용촉진 및 정보보호 등에 관한 법률」 등 관련 법령을 위배하지 않는 범위에서 본 약관을 개정할 수 있습니다.

4. 회사가 약관을 개정할 경우에는 적용일자 및 개정사유를 명시하여 현행약관과 함께 그 적용일자 7일 전부터 적용일자 전일까지 서비스 내에 공지합니다. 다만, 회원에게 불리하게 약관 내용을 변경하는 경우에는 최소한 30일 이상의 사전 유예기간을 두고 공지하며, 이메일, 서비스 내 알림 등 전자적 수단을 통해 회원에게 개별적으로 통지합니다.

5. 회원이 개정약관에 동의하지 않는 경우, 회원은 이용계약을 해지할 수 있습니다. 회사가 전항에 따라 통지하면서 '회원이 명시적인 거부 의사를 표시하지 않을 경우 개정약관에 동의한 것으로 본다'는 뜻을 명확하게 고지하였음에도 불구하고, 회원이 시행일 이후에도 서비스를 계속 이용하는 경우에는 개정약관에 동의한 것으로 봅니다.

## 제2장 서비스 이용 계약

### 제4조 (이용 계약의 성립)
1. 이용계약은 서비스를 이용하고자 하는 자(이하 '가입신청자')가 본 약관의 내용에 동의한 다음, 회사가 정한 절차에 따라 이용신청을 하고, 회사가 이러한 신청에 대하여 승낙함으로써 체결됩니다.

2. 가입신청자는 반드시 본인 또는 소속 법인의 명의로 가입을 신청해야 하며, 회사는 본인확인기관을 통한 인증 절차를 요구할 수 있습니다.

### 제5조 (이용 신청의 승낙과 제한)
1. 회사는 가입신청자의 신청에 대하여 서비스 이용을 승낙함을 원칙으로 합니다.

2. 회사는 다음 각 호에 해당하는 신청에 대하여는 승낙을 하지 않거나 사후에 이용계약을 해지할 수 있습니다. 이는 플랫폼의 안정성과 보안, 다른 선량한 회원들을 보호하기 위한 필수적인 조치입니다.
   - 가입신청자가 이전에 회원 자격을 상실한 적이 있는 경우 (단, 회사의 재가입 승낙을 얻은 경우는 예외).
   - 실명이 아니거나 타인의 명의를 이용한 경우.
   - 허위의 정보를 기재하거나, 회사가 제시하는 내용을 누락한 경우.
   - 만 14세 미만의 아동이 법정대리인의 동의를 얻지 않은 경우 (B2B 서비스 특성상 해당 가능성은 낮으나, 법적 준수를 위해 명시).
   - 서비스의 정상적인 운영을 저해하거나, 관련 법령을 위반할 목적으로 신청하는 경우.
   - 비정상적인 경로(예: VPN 우회)나 부정한 방법을 통해 이용 신청을 하는 등, 서비스의 안정성을 위협할 수 있다고 판단되는 경우.
   - 기술적, 운영상 문제로 서비스 제공이 곤란한 경우.
   - 기타 회사가 합리적인 판단에 의해 필요하다고 인정하는 경우.

3. 회사는 서비스 관련 설비의 여유가 없거나, 기술상 또는 업무상 문제가 있는 경우에는 그 사유가 해소될 때까지 승낙을 유보할 수 있습니다.

### 제6조 (회원 정보의 관리)
1. 회원은 서비스 내 개인정보 관리 화면을 통하여 언제든지 본인의 정보를 열람하고 수정할 수 있습니다.

2. 회원은 가입 신청 시 기재한 사항이 변경되었을 경우, 즉시 온라인으로 수정하거나 회사에 그 변경사항을 알려야 하며, 이를 이행하지 않아 발생한 불이익에 대해 회사는 책임지지 않습니다.

3. 회원은 자신의 계정(아이디, 비밀번호)에 대한 관리 책임을 부담하며, 이를 제3자가 이용하도록 허용해서는 안 됩니다.

4. 회원은 자신의 계정이 도용되거나 제3자에 의해 사용되고 있음을 인지한 경우, 이를 즉시 회사에 통지하고 회사의 안내에 따라야 합니다. 이를 통지하지 않거나 통지 후 회사의 안내에 따르지 않아 발생한 불이익에 대하여 회사는 책임지지 않습니다.

## 제3장 서비스의 이용

### 제7조 (서비스의 제공 및 변경)
1. 회사는 회원에게 아래와 같은 서비스를 제공합니다.
   - 고객 정보 관리 및 분석 기능
   - 영업 활동 관리 및 파이프라인 시각화 기능
   - 마케팅 자동화 및 캠페인 관리 기능
   - 서비스 데스크 및 고객 지원 관리 기능
   - 데이터 연동을 위한 API 제공
   - 기타 회사가 추가 개발하거나 제휴 계약 등을 통해 회원에게 제공하는 일체의 서비스.

2. 회사는 연중무휴, 1일 24시간 서비스 제공을 원칙으로 합니다. 다만, 제8조에 해당하는 경우 서비스가 일시적으로 중단될 수 있습니다.

3. 회사는 상당한 이유가 있는 경우, 운영상, 기술상의 필요에 따라 제공하고 있는 서비스의 전부 또는 일부를 변경할 수 있습니다. 내용이 중대하거나 회원에게 불리한 변경일 경우, 회사는 제3조 제4항에서 정한 방법으로 회원에게 통지합니다.

4. 회사는 무료 서비스의 일부 또는 전부를 회사의 정책 및 운영의 필요상 수정, 중단, 변경할 수 있으며, 이에 대하여 관련 법령에 특별한 규정이 없는 한 회원에게 별도의 보상을 하지 않습니다.

### 제8조 (서비스의 중단 및 제한)
1. 회사는 다음 각 호에 해당하는 경우 서비스의 전부 또는 일부를 제한하거나 중단할 수 있습니다.
   - 서비스용 설비의 보수 등 공사로 인한 부득이한 경우 (사전 공지를 원칙으로 함)
   - 회원이 회사의 영업활동을 방해하는 경우
   - 정전, 제반 설비의 장애 또는 이용량의 폭주 등으로 정상적인 서비스 이용에 지장이 있는 경우
   - 기간통신사업자가 전기통신 서비스를 중단했을 경우
   - 국가비상사태, 천재지변 등 불가항력적 사유가 있는 경우

2. 회사는 제1항의 사유로 서비스 제공이 중단되는 경우, 제3조 제4항의 방법으로 회원에게 통지합니다. 다만, 회사가 통제할 수 없는 사유로 인한 서비스의 중단(시스템 관리자의 고의, 과실이 없는 디스크 장애, 시스템 다운 등)으로 인하여 사전 통지가 불가능한 경우에는 사후에 통지할 수 있습니다.

### 제9조 (유료 서비스 이용)
1. 회원은 회사가 제공하는 다양한 유료 서비스 플랜(예: Basic, Pro, Enterprise) 중 하나를 선택하여 이용할 수 있습니다. 각 플랜별 제공 기능 및 이용 요금은 서비스 홈페이지에 명시됩니다.

2. 유료 서비스 이용 요금은 월간 또는 연간 구독 방식으로 결제됩니다. 요금은 선택한 플랜, 이용하는 최종 이용자 수, 추가 기능(Add-on) 등에 따라 산정됩니다.

3. 요금은 회원이 등록한 결제수단을 통해 매월 또는 매년 정해진 날짜에 자동으로 청구됩니다. 정상적인 결제가 이루어지지 않을 경우, 서비스 이용이 제한될 수 있습니다.

4. 회원은 언제든지 상위 플랜으로 업그레이드하거나 하위 플랜으로 다운그레이드할 수 있습니다. 업그레이드 시에는 차액이 즉시 청구될 수 있으며, 다운그레이드는 다음 결제 주기에 적용됩니다.

5. 모든 서비스 이용 요금에는 부가가치세(VAT) 등 관련 세금이 포함되어 있지 않으며, 회원은 해당 세금을 추가로 부담해야 합니다.

6. 회사는 프로모션, 비영리 단체 지원 등 특정 조건에 따라 요금을 할인하거나 크레딧을 제공할 수 있습니다. 이러한 혜택의 조건 및 내용은 별도로 공지됩니다.

### 제10조 (청약 철회, 계약 해지 및 환불)
1. 회원은 언제든지 서비스 내 설정 화면 또는 고객센터를 통해 이용계약을 해지(회원 탈퇴)할 수 있습니다. 해지 신청 시, 이용계약은 즉시 종료됩니다.

2. 본 서비스는 그 특성상 「전자상거래 등에서의 소비자보호에 관한 법률」 제17조 제2항 제5호에 따라 청약철회가 제한될 수 있는 디지털 콘텐츠에 해당할 수 있습니다. 회사가 사전에 이러한 사실을 고지한 경우, 회원의 단순 변심이나 착오 구매에 의한 청약철회 및 환불은 불가능합니다. 이는 분쟁을 최소화하고 안정적인 서비스를 제공하기 위함입니다.

3. 유료 서비스의 환불 정책은 다음과 같습니다.
   - 월간 구독: 이미 결제된 당월 이용 요금은 환불되지 않으며, 계약 해지 시 다음 결제 주기가 도래하기 전까지 서비스를 이용할 수 있습니다.
   - 연간 구독: 연간 구독을 중도에 해지하는 경우, 회사는 잔여 기간에 대한 요금을 환불하지 않는 것을 원칙으로 합니다. 다만, 회사가 별도로 정한 기준에 따라 위약금(예: 연간 할인액)을 공제한 후 일부 금액을 환불할 수 있습니다.
   - 회사의 귀책사유로 인한 해지: 회사의 중대한 과실로 회원이 서비스를 정상적으로 이용하지 못한 경우, 회사는 회원의 요청에 따라 잔여 기간에 대한 요금을 환불하거나 그에 상응하는 조치를 취합니다.
   - 회원의 귀책사유로 인한 해지: 회원이 본 약관상의 의무를 위반하여 회사가 이용계약을 해지하는 경우, 환불은 제공되지 않습니다.

4. 환불 절차, 분쟁 해결 등은 「전자상거래 등에서의 소비자보호에 관한 법률」 및 「소비자분쟁해결기준」 등 관련 법규에 따릅니다. 명확한 환불 정책은 결제 대행사(PG)와의 관계에서 발생할 수 있는 지불 거절(Chargeback) 분쟁을 예방하고, 안정적인 결제 시스템을 유지하는 데 필수적입니다.

### 제11조 (운영 정책 및 제재)
1. 회원은 서비스를 이용함에 있어 다음 각 호의 행위를 해서는 안 됩니다.
   - 법령, 공공질서 및 미풍양속에 위배되는 콘텐츠를 게시하거나 전송하는 행위.
   - 제3자의 지식재산권, 명예, 개인정보 등 제반 권리를 침해하는 행위.
   - 회사의 사전 동의 없이 서비스를 영리 목적으로 이용하거나 제3자에게 재판매, 임대하는 행위.
   - 서비스의 안정적인 운영을 방해할 수 있는 컴퓨터 바이러스, 악성코드를 유포하는 행위.
   - 서비스의 기술적 보호 조치를 무력화하거나, 소스 코드를 리버스 엔지니어링, 디컴파일하는 행위.
   - 스팸, 불법 광고 등 정보통신망법을 위반하는 정보를 전송하는 행위.
   - 회사가 금지하는 특정 업종(예: 불법 도박, 성인물, 의약품 판매 등)의 영업을 위해 서비스를 이용하는 행위.

2. 회사는 회원이 제1항의 금지행위를 한 경우, 사안의 중대성에 따라 다음과 같은 단계적 제재 조치를 취할 수 있습니다.
   - 경고: 위반 행위에 대한 시정을 요구하는 1차 조치.
   - 이용 제한: 특정 기능(예: 메시지 발송)의 이용을 일시적으로 제한.
   - 계정 정지: 일정 기간 동안 서비스 전체에 대한 접근을 차단.
   - 영구 이용 제한 및 계약 해지: 중대한 위반 또는 반복적인 위반 시 계정을 영구적으로 비활성화하고 이용계약을 해지.

3. 회사는 제재 조치를 취하기 전에 회원에게 그 사유를 통지하고 소명할 기회를 부여하는 것을 원칙으로 합니다. 단, 다른 회원이나 서비스에 대한 심각한 위험이 예상되는 등 긴급한 조치가 필요한 경우에는 선 조치 후 통지할 수 있습니다.

### 제12조 (휴면 계정 정책)
1. 회원이 1년 이상 서비스에 로그인하지 않는 경우, 해당 계정은 휴면 계정으로 전환될 수 있습니다. 회사는 휴면 전환 30일 전까지 해당 사실을 이메일 등으로 회원에게 통지합니다.

2. 휴면 계정으로 전환된 무료 회원의 계정 및 관련 데이터는 회사의 정책에 따라 삭제될 수 있습니다. 유료 회원의 계정은 구독이 유지되는 동안 휴면 처리되지 않습니다.

## 제4장 계약 당사자의 권리와 의무

### 제13조 (회사의 의무)
1. 회사는 관련 법령과 본 약관이 금지하는 행위를 하지 않으며, 계속적이고 안정적으로 서비스를 제공하기 위해 최선을 다하여 노력합니다.

2. 회사는 회원의 개인정보(고객 데이터 포함)를 안전하게 보호하기 위해 보안 시스템을 갖추고 개인정보처리방침을 공시하고 준수합니다. 회사는 회원의 동의 없이 고객 데이터를 제3자에게 누설하거나 배포하지 않습니다.

3. 회사는 서비스 이용과 관련하여 회원으로부터 제기된 의견이나 불만이 정당하다고 인정할 경우에는 이를 신속하게 처리해야 합니다. 처리 과정 및 결과는 서비스 내 공지, 이메일 등을 통해 회원에게 전달할 수 있습니다.

### 제14조 (회원의 의무)
1. 회원은 유료 서비스 이용에 따른 요금을 지정된 기일에 성실하게 납부할 의무가 있습니다.

2. 회원은 본 약관 및 관련 법령, 회사의 운영 정책을 준수해야 합니다.

3. 회원은 서비스 이용에 필요한 모든 고객 데이터의 정확성, 품질, 적법성에 대해 전적인 책임을 집니다. 회원은 고객 데이터를 수집하고 회사에 처리를 위탁하기 위해 필요한 모든 권리, 동의, 허가를 확보했음을 보증해야 합니다.

4. 회원은 자신의 최종 이용자가 본 약관을 준수하도록 관리·감독할 책임이 있으며, 최종 이용자의 약관 위반 행위는 회원의 위반 행위로 간주됩니다. 이는 B2B 서비스의 책임 관계를 명확히 하는 핵심 조항입니다.

5. 회원은 회사의 지식재산권을 침해하는 어떠한 행위도 해서는 안 됩니다.

### 제15조 (고객 데이터의 처리와 소유권)
1. **데이터 소유권**: 회원과 회사 사이에서, 회원은 자신이 서비스에 제출한 모든 고객 데이터에 대한 소유권 및 모든 관련 권리를 보유합니다. 회사는 고객 데이터에 대한 어떠한 소유권도 주장하지 않습니다. 이 조항은 B2B SaaS 비즈니스에서 고객의 신뢰를 확보하는 가장 중요한 기반입니다. 고객은 자신의 핵심 자산인 고객 데이터의 통제권을 상실할 것을 우려하므로, 서비스 제공자가 데이터의 소유권을 주장하지 않음을 명확히 선언하는 것은 필수적입니다.

2. **처리 권한의 위임**: 회원은 본 약관에 따라 서비스를 제공, 유지 및 지원하는 데 필요한 범위 내에서 회사가 고객 데이터를 호스팅, 복사, 전송, 표시 및 처리할 수 있는 전 세계적인, 제한된 기간의 라이선스를 회사에 부여합니다.

3. **회사의 데이터 처리**: 회사는 오직 회원에게 서비스를 제공하고, 서비스의 장애를 예방 또는 해결하며, 회원의 요청에 따른 기술 지원을 제공하거나, 법률에 의해 요구되는 경우에만 고객 데이터에 접근하고 이를 사용합니다. 회사는 회원의 사전 서면 동의 없이 (가) 고객 데이터를 제3자에게 공개하거나, (나) 본 약관에서 명시한 목적 외에 다른 용도로 고객 데이터를 사용하지 않습니다.

### 제16조 (지식재산권)
1. 서비스 자체에 대한 저작권 및 기타 지식재산권은 회사에 귀속됩니다. 여기에는 소프트웨어, 디자인, UI, 문서, 로고 등이 포함됩니다.

2. 회사는 회원에게 본 약관에서 정한 조건에 따라 서비스를 이용할 수 있는 비독점적이고, 양도 불가능하며, 취소 가능한 이용권만을 부여합니다.

3. 회원은 회사의 지식재산권을 복제, 수정, 배포, 판매, 양도, 담보 제공 등의 방법으로 처분할 수 없습니다.

4. 회원이 서비스 내에 게시하는 콘텐츠의 지식재산권은 해당 회원에게 귀속됩니다. 단, 회원은 해당 콘텐츠를 서비스 운영, 개선, 홍보 및 연구 목적으로 사용할 수 있는 비독점적 라이선스를 회사에 부여하는 데 동의합니다.

## 제5장 기타

### 제17조 (비밀유지)
1. 각 당사자('수령 당사자')는 상대방('공개 당사자')으로부터 서면, 구두 또는 기타 형태로 제공받은 모든 기술상, 경영상 정보 및 본 계약의 존재와 내용 등 일체의 정보(이하 '비밀정보')를 비밀로 유지해야 합니다.

2. 수령 당사자는 공개 당사자의 사전 서면 동의 없이 비밀정보를 제3자에게 공개, 누설하거나 본 계약 이행 외의 목적으로 사용해서는 안 됩니다.

3. 비밀유지 의무는 본 계약이 종료된 후에도 3년간 유효합니다.

### 제18조 (책임 제한)
1. 회사는 천재지변 또는 이에 준하는 불가항력으로 인하여 서비스를 제공할 수 없는 경우에는 서비스 제공에 관한 책임이 면제됩니다.

2. 회사는 회원의 귀책사유로 인한 서비스 이용의 장애에 대하여는 책임을 지지 않습니다.

3. 서비스는 '있는 그대로(As-Is)' 그리고 '이용 가능한 대로(As-Available)' 제공됩니다. 회사는 법령에 특별한 규정이 없는 한, 서비스의 특정 목적 적합성, 완전성, 상품성, 비침해성에 대해 명시적 또는 묵시적인 어떠한 보증도 하지 않습니다.

4. 어떠한 경우에도 본 계약으로 인해 또는 이와 관련하여 발생하는 회사의 총 누적 배상 책임액은, 그 원인이 계약, 불법행위 또는 기타 법률 이론에 근거하는지와 관계없이, 해당 손해가 발생하기 직전 12개월 동안 회원이 회사에 지급한 총 이용 요금을 초과하지 않습니다. 이 조항은 스타트업이 예측 불가능한 재무적 위험에 노출되는 것을 방지하고, 합리적인 가격에 서비스를 제공할 수 있도록 하는 필수적인 위험 관리 장치입니다.

5. 회사는 어떠한 경우에도 간접적, 특별, 부수적, 결과적 또는 징벌적 손해(이익, 수익, 데이터 또는 영업 기회의 상실 포함)에 대해 책임을 지지 않습니다.

### 제19조 (손해배상)
회원은 본 약관의 규정을 위반하거나, 관련 법령을 위반하여 회사 또는 제3자에게 손해를 입힌 경우, 그로 인해 발생하는 모든 손해를 배상할 책임이 있습니다. 회원은 자신의 위반 행위로 인해 제3자가 회사에 대해 제기하는 모든 청구, 소송, 손해배상 요구로부터 회사를 면책하고 방어해야 합니다.

### 제20조 (준거법 및 재판관할)
1. 본 약관 및 서비스 이용계약에 관해서는 대한민국 법률을 준거법으로 합니다.

2. 회사와 회원 간 발생한 분쟁에 관한 소송은 서울중앙지방법원을 제1심 관할법원으로 합니다.

### 제21조 (기타 조항)
1. 본 약관의 어떠한 조항도 당사자 간의 파트너십, 합작 투자, 대리 또는 고용 관계를 생성하는 것으로 해석되지 않습니다.

2. 회원이 본 약관상의 권리나 의무를 회사의 사전 서면 동의 없이 제3자에게 양도하거나 담보로 제공할 수 없습니다.

**부칙**
본 약관은 2025년 6월 26일부터 시행됩니다.

공고일자: 2025년 5월 27일
  `;
}
/**
 * 기본 개인정보처리방침 내용
 */
function getDefaultPrivacyContent(): string {
  return `
# SureCRM 개인정보처리방침

**버전: 2.0**
**시행일자: 2025년 6월 26일**

## 총칙

주식회사 슈어소프트(이하 '회사')는 정보주체의 자유와 권리 보호를 위해 「개인정보 보호법」 및 관계 법령이 정한 바를 준수하여, 적법하게 개인정보를 처리하고 안전하게 관리하고 있습니다. 회사는 본 개인정보처리방침을 통해 정보주체가 제공하는 개인정보가 어떠한 용도와 방식으로 이용되고 있으며, 개인정보보호를 위해 어떠한 조치가 취해지고 있는지 알려드립니다.

본 방침은 SureCRM 서비스(이하 '서비스')에 적용됩니다. 회사는 서비스의 성격에 따라 다음과 같이 두 가지 역할을 수행합니다. 이는 글로벌 데이터 보호 규정(GDPR) 등 국제 표준을 준수하고 책임 범위를 명확히 하기 위함입니다.

**개인정보처리자 (Data Controller)**: 회사는 서비스 제공을 위해 직접 수집하는 회원 및 잠재 고객의 개인정보에 대해 개인정보처리자의 지위를 가집니다. 여기에는 계정 관리, 결제, 고객 지원, 마케팅 활동에 필요한 정보가 포함됩니다.

**개인정보 수탁자 (Data Processor)**: 회사는 **회원이 서비스를 이용하여 수집, 저장, 처리하는 '고객 데이터'**에 대해서는 개인정보 수탁자의 지위를 가집니다. 이 경우, 데이터의 통제 권한은 회원에게 있으며, 회사는 오직 회원의 지시에 따라 데이터를 처리합니다.

## 제1조 (처리하는 개인정보의 항목 및 처리 목적)

회사는 서비스 제공, 회원 관리, 고객 지원 등 다양한 목적을 위해 필요 최소한의 개인정보를 수집하고 있습니다. 수집하는 개인정보의 항목, 목적, 보유 기간은 아래 표와 같이 투명하게 공개하며, 이는 정보주체의 알 권리를 보장하고 관련 법규를 준수하기 위한 필수적인 조치입니다.

### 개인정보 수집 및 이용 내역

| 처리 구분 | 처리 목적 | 수집 항목 | 보유 및 이용기간 |
|-----------|-----------|-----------|------------------|
| **A. 회사가 '개인정보처리자'로서 직접 수집하는 정보** |
| 회원 가입 및 관리 | 회원 식별, 본인 인증, 서비스 제공 계약 유지 및 관리, 부정 이용 방지, 각종 고지 및 통지 | [필수] 이름, 이메일 주소, 연락처, 회사명, 비밀번호<br>[선택] 부서, 직책 | 회원 탈퇴 시까지<br>단, 부정 이용 방지를 위한 기록은 1년간 보관 |
| 유료 서비스 결제 및 정산 | 유료 서비스 이용에 따른 요금 결제, 청구서 발송, 정산 및 환불 처리 | 카드사명, 카드번호(일부 마스킹), 사업자등록번호, 청구지 주소 등 결제에 필요한 정보 | 5년 (전자상거래 등에서의 소비자보호에 관한 법률) |
| 고객 문의 및 지원 | 문의사항 확인 및 회신, 불만 처리, 분쟁 조정을 위한 기록 보존 | 이메일 주소, 연락처, 상담 내용(텍스트, 이미지 등) | 3년 (전자상거래 등에서의 소비자보호에 관한 법률) |
| 마케팅 및 광고 활용 | 신규 서비스, 기능, 이벤트, 프로모션 정보 안내, 뉴스레터 발송 (별도 동의 시) | 이름, 이메일 주소, 연락처 | 동의 철회 시 또는 수신 거부 시까지 |
| 서비스 이용 기록 자동 생성 | 서비스 품질 개선, 이용 환경 최적화, 통계 분석, 비정상적 이용 행태 탐지 | 접속 IP 주소, 쿠키(Cookie), 서비스 이용 기록, 접속 로그, 브라우저 종류, OS 정보 등 기기 정보 | 3개월 (통신비밀보호법) |
| **B. 회사가 '개인정보 수탁자'로서 회원을 대신하여 처리하는 정보** |
| 고객 데이터 | 회원이 CRM 기능 수행을 위해 서비스 내에 자발적으로 입력, 업로드, 관리하는 데이터의 처리 | 회원이 수집하여 입력하는 고객의 개인정보 일체 (예: 고객의 이름, 연락처, 이메일, 주소, 상담 내역, 구매 이력 등) | 서비스 이용계약 기간 동안<br>계약 종료 또는 회원의 삭제 요청 시 파기 |

## 제2조 (개인정보의 처리 및 보유 기간)

회사는 법령에 따른 개인정보 보유·이용 기간 또는 정보주체로부터 개인정보를 수집 시에 동의받은 보유·이용 기간 내에서 개인정보를 처리 및 보유합니다.

원칙적으로 개인정보 수집 및 이용 목적이 달성된 후에는 해당 정보를 지체 없이 파기합니다.

다만, 제1조의 표에 명시된 바와 같이 「전자상거래 등에서의 소비자보호에 관한 법률」, 「통신비밀보호법」 등 관계 법령의 규정에 의하여 보존할 필요가 있는 경우, 회사는 관계 법령에서 정한 일정한 기간 동안 개인정보를 보관합니다. 이 경우 회사는 보관하는 정보를 그 보관의 목적으로만 이용하며, 보존 기간은 아래와 같습니다.

**가.** 계약 또는 청약철회 등에 관한 기록: 5년  
**나.** 대금결제 및 재화 등의 공급에 관한 기록: 5년  
**다.** 소비자의 불만 또는 분쟁처리에 관한 기록: 3년  
**라.** 웹사이트 방문 기록: 3개월

## 제3조 (개인정보의 제3자 제공)

회사는 정보주체의 개인정보를 제1조(처리하는 개인정보의 항목 및 처리 목적)에서 명시한 범위 내에서만 처리하며, 정보주체의 사전 동의 없이는 원칙적으로 외부에 제공하지 않습니다. 다만, 다음의 경우에는 예외로 합니다.

1. 정보주체로부터 별도의 동의를 받은 경우
2. 법률에 특별한 규정이 있거나 법령상 의무를 준수하기 위하여 불가피한 경우
3. 수사 목적으로 법령에 정해진 절차와 방법에 따라 수사기관의 요구가 있는 경우

## 제4조 (개인정보 처리업무의 위탁)

회사는 원활한 서비스 제공과 업무 효율성 증대를 위해 다음과 같이 개인정보 처리업무를 외부 전문업체에 위탁하여 운영하고 있습니다.

회사는 위탁계약 체결 시 「개인정보 보호법」 제26조에 따라 위탁업무 수행목적 외 개인정보 처리 금지, 기술적·관리적 보호조치, 재위탁 제한, 수탁자에 대한 관리·감독, 손해배상 등 책임에 관한 사항을 계약서 등 문서에 명시하고, 수탁자가 개인정보를 안전하게 처리하는지를 감독하고 있습니다.

위탁업무의 내용이나 수탁자가 변경될 경우에는 지체 없이 본 개인정보처리방침을 통하여 공개하도록 하겠습니다.

### 개인정보 처리 위탁 현황

| 수탁업체 | 위탁업무 내용 |
|----------|---------------|
| Amazon Web Services, Inc. (AWS) | 클라우드 인프라(서버) 운영 및 데이터 보관 |
| 토스페이먼츠 주식회사 | 신용카드, 계좌이체 등 서비스 이용 요금 결제 처리 |
| HubSpot, Inc. | 마케팅 자동화, 이메일 발송, 고객 관계 관리 시스템 운영 |
| Google, LLC (Google Analytics) | 서비스 이용 형태 및 접속 통계 분석 |

## 제5조 (개인정보의 국외 이전)

회사는 안정적이고 효율적인 서비스 제공을 위해 다음과 같이 개인정보를 국외에 이전하여 처리하고 있으며, 정보주체의 권리가 침해되지 않도록 관련 법령에 따라 필요한 모든 조치를 취하고 있습니다. 글로벌 클라우드 인프라 활용은 현대 SaaS의 표준이며, 이를 투명하게 공개하는 것은 고객 신뢰의 핵심 요소입니다.

### 개인정보 국외 이전 현황

| 이전받는 자 (수탁업체) | 이전되는 국가 | 이전 항목 | 이전 목적 | 보유 및 이용기간 |
|------------------------|---------------|-----------|-----------|------------------|
| Amazon Web Services, Inc. | 미국 (데이터는 서울 리전(ap-northeast-2)에 저장되나, 장애 복구 및 관리 목적으로 접근 가능) | 서비스 운영에 필요한 모든 데이터 (회원정보, 고객 데이터 등) | 클라우드 서버 호스팅 및 데이터 저장 | 회원 탈퇴 또는 위탁 계약 종료 시까지 |
| HubSpot, Inc. | 미국 | 이름, 이메일 주소, 연락처, 회사명 등 회원 정보 | 고객 관리(CRM) 및 마케팅 자동화, 이메일 발송 | 회원 탈퇴 또는 위탁 계약 종료 시까지 |
| Google, LLC | 미국 | 비식별화된 행태정보 (쿠키, 서비스 이용 기록 등) | 서비스 이용 현황 분석 및 통계 | 회원 탈퇴 또는 위탁 계약 종료 시까지 |

정보주체는 개인정보의 국외 이전을 거부할 수 있습니다. 다만, 국외 이전은 서비스 제공에 필수적인 요소이므로, 거부 시 서비스의 전부 또는 일부 이용이 제한될 수 있습니다. 국외 이전을 원하지 않으시는 경우, 고객센터를 통해 문의해주시기 바랍니다.

## 제6조 (정보주체와 법정대리인의 권리·의무 및 행사방법)

정보주체는 회사에 대해 언제든지 다음 각 호의 개인정보 보호 관련 권리를 행사할 수 있습니다. 이는 국내법뿐만 아니라 GDPR 등 국제적인 데이터 보호 기준을 포괄하는 것으로, 정보주체의 자기결정권을 최대한 보장하기 위함입니다.

**가.** 개인정보 열람 요구권: 자신의 개인정보 처리 내역을 열람할 수 있는 권리  
**나.** 개인정보 정정·삭제 요구권: 정보에 오류가 있거나 불완전할 경우 정정 또는 삭제를 요구할 수 있는 권리  
**다.** 개인정보 처리정지 요구권: 특정 조건 하에서 자신의 개인정보 처리를 일시적으로 중단하도록 요구할 수 있는 권리  
**라.** 동의 철회권: 개인정보 수집·이용·제공에 대한 동의를 언제든지 철회할 수 있는 권리  
**마.** 개인정보 이동권 (Data Portability): 회사가 처리하는 자신의 개인정보를 체계적이고 보편적으로 사용되는 기계가 읽을 수 있는 형태로 제공받아, 다른 개인정보처리자에게 이전할 수 있는 권리

권리 행사는 서비스 내 '회원정보 수정' 기능을 이용하거나, 개인정보 보호책임자에게 서면, 전화, 이메일 등을 통하여 하실 수 있으며, 회사는 이에 대해 지체 없이 조치하겠습니다.

정보주체가 개인정보의 오류 등에 대한 정정 또는 삭제를 요구한 경우에는 회사는 정정 또는 삭제를 완료할 때까지 당해 개인정보를 이용하거나 제공하지 않습니다.

권리 행사는 정보주체의 법정대리인이나 위임을 받은 자 등 대리인을 통하여 하실 수 있습니다. 이 경우, 「개인정보 처리 방법에 관한 고시」 별지 제11호 서식에 따른 위임장을 제출하셔야 합니다.

회사는 만 14세 미만 아동의 개인정보를 원칙적으로 수집하지 않으며, 부득이하게 수집이 필요한 경우 법정대리인의 동의를 반드시 받습니다.

## 제7조 (개인정보의 파기)

회사는 개인정보 보유기간의 경과, 처리목적 달성 등 개인정보가 불필요하게 되었을 때에는 지체 없이 해당 개인정보를 파기합니다.

정보주체로부터 동의받은 개인정보 보유기간이 경과하거나 처리목적이 달성되었음에도 불구하고 다른 법령에 따라 개인정보를 계속 보존하여야 하는 경우에는, 해당 개인정보를 별도의 데이터베이스(DB)로 옮기거나 보관장소를 달리하여 안전하게 보존합니다.

개인정보 파기의 절차 및 방법은 다음과 같습니다:  
**가.** 파기절차: 회사는 파기 사유가 발생한 개인정보를 선정하고, 회사의 개인정보 보호책임자의 승인을 받아 개인정보를 파기합니다.

**나.** 파기방법: 전자적 파일 형태로 기록·저장된 개인정보는 기록을 재생할 수 없는 기술적 방법을 사용하여 삭제하며, 종이 문서에 기록·저장된 개인정보는 분쇄기로 분쇄하거나 소각하여 파기합니다.

## 제8조 (개인정보의 안전성 확보 조치)

회사는 정보주체의 개인정보가 분실, 도난, 유출, 위·변조 또는 훼손되지 않도록 안전성 확보를 위해 다음과 같은 기술적·관리적·물리적 조치를 하고 있습니다. B2B 고객은 서비스 선택 시 보안 수준을 핵심적인 기준으로 평가하므로, 구체적이고 신뢰도 높은 보안 조치를 명시하는 것은 매우 중요합니다.

### 관리적 조치:
**가.** 내부관리계획 수립 및 시행: 개인정보의 안전한 처리를 위하여 내부관리계획을 수립하고 연 1회 이상 이행 여부를 점검합니다.

**나.** 개인정보 취급 직원의 최소화 및 교육: 개인정보를 취급하는 직원을 지정하고 담당자에 한정시켜 최소화하며, 정기적인 보안 교육을 실시합니다.

### 기술적 조치:
**가.** 개인정보처리시스템 접근통제: 개인정보를 처리하는 데이터베이스시스템에 대한 접근권한의 부여, 변경, 말소를 통하여 개인정보에 대한 접근을 통제하고, 침입차단시스템(방화벽)을 이용하여 외부로부터의 무단 접근을 통제하고 있습니다.

**나.** 접속기록의 보관 및 위·변조 방지: 개인정보처리시스템에 접속한 기록을 최소 2년 이상 보관, 관리하며, 접속 기록이 위·변조 및 도난, 분실되지 않도록 보안 기능을 사용하고 있습니다.

**다.** 개인정보의 암호화: 정보주체의 비밀번호 등 중요 개인정보는 암호화하여 저장 및 관리하고 있으며, 중요한 데이터는 파일 및 전송 데이터를 암호화하거나 파일 잠금 기능을 사용하는 등의 별도 보안 기능을 사용하고 있습니다.

**라.** 보안프로그램 설치 및 주기적 갱신: 해킹이나 컴퓨터 바이러스 등에 의한 개인정보 유출 및 훼손을 막기 위하여 보안프로그램을 설치하고 주기적으로 갱신·점검합니다.

### 물리적 조치:
**가.** 비인가자에 대한 출입 통제: 개인정보를 보관하고 있는 전산실, 자료보관실 등 물리적 보관 장소를 별도로 두고 이에 대해 출입통제 절차를 수립, 운영하고 있습니다.

## 제9조 (개인정보 자동 수집 장치의 설치·운영 및 거부)

회사는 정보주체에게 개별적인 맞춤 서비스를 제공하기 위해 이용정보를 저장하고 수시로 불러오는 '쿠키(cookie)'를 사용합니다.

쿠키는 웹사이트를 운영하는 데 이용되는 서버가 정보주체의 브라우저에 보내는 소량의 정보이며, 정보주체의 컴퓨터 하드디스크에 저장됩니다.

**쿠키의 사용 목적**: 회원과 비회원의 접속 빈도나 방문 시간 등을 분석, 이용자의 취향과 관심분야를 파악 및 자취 추적, 각종 이벤트 참여 정도 및 방문 횟수 파악 등을 통한 타겟 마케팅 및 개인 맞춤 서비스 제공.

**쿠키의 설치·운영 및 거부**: 정보주체는 쿠키 설치에 대한 선택권을 가지고 있습니다. 따라서, 웹브라우저에서 옵션을 설정함으로써 모든 쿠키를 허용하거나, 쿠키가 저장될 때마다 확인을 거치거나, 아니면 모든 쿠키의 저장을 거부할 수도 있습니다. 단, 쿠키 저장을 거부할 경우 맞춤형 서비스 이용에 어려움이 발생할 수 있습니다.

**설정방법 예시(Chrome)**: 웹 브라우저 우측 상단 메뉴 > 설정 > 개인정보 및 보안 > 쿠키 및 기타 사이트 데이터

## 제10조 (행태정보의 처리)

회사는 맞춤형 광고 제공 및 서비스 개선을 위해 행태정보를 수집·이용할 수 있습니다.

**수집하는 행태정보 항목**: 웹/앱 방문 이력, 검색 및 클릭 기록 등 서비스 이용 기록

**행태정보 수집 방법**: 웹사이트 및 앱 방문 시 로그 분석 툴 등을 통해 자동 수집

**보유·이용 기간 및 이후 정보처리 방법**: 수집일로부터 1년 후 파기 또는 비식별 조치

**정보주체의 통제권 행사 방법**: 제9조 제4항의 쿠키 설정 거부 또는 광고 식별자 설정 변경을 통해 행태정보 수집을 거부할 수 있습니다.

## 제11조 (개인정보 보호책임자)

회사는 개인정보 처리에 관한 업무를 총괄해서 책임지고, 개인정보 처리와 관련한 정보주체의 불만 처리 및 피해구제 등을 위하여 아래와 같이 개인정보 보호책임자를 지정하고 있습니다.

### 개인정보 보호책임자 (DPO)
- **성명**: 홍길동
- **직책**: 정보보호최고책임자 (CISO)
- **연락처**: 02-1234-5678
- **이메일**: privacy@surecrm.com

### 개인정보보호 담당부서
- **부서명**: 정보보호팀
- **담당자**: 이몽룡
- **연락처**: 02-1234-5679
- **이메일**: support.privacy@surecrm.com

정보주체는 서비스 이용 과정에서 발생하는 모든 개인정보보호 관련 문의, 불만 처리, 피해 구제 등에 관한 사항을 개인정보 보호책임자 및 담당부서로 문의할 수 있습니다. 회사는 정보주체의 문의에 대해 지체 없이 답변 및 처리해드릴 것입니다.

## 제12조 (권익침해 구제방법)

정보주체는 개인정보침해로 인한 구제를 받기 위하여 개인정보분쟁조정위원회, 한국인터넷진흥원 개인정보침해신고센터 등에 분쟁 해결이나 상담 등을 신청할 수 있습니다. 이 밖에 기타 개인정보침해의 신고, 상담에 대하여는 아래의 기관에 문의하시기 바랍니다.

1. **개인정보분쟁조정위원회**: (국번없이) 1833-6972 (www.kopico.go.kr)
2. **개인정보침해신고센터**: (국번없이) 118 (privacy.kisa.or.kr)
3. **대검찰청**: (국번없이) 1301 (www.spo.go.kr)
4. **경찰청**: (국번없이) 182 (ecrm.cyber.go.kr)

## 제13조 (개인정보처리방침의 변경)

본 개인정보처리방침은 2025년 6월 26일부터 적용됩니다.

법령 및 방침에 따른 변경내용의 추가, 삭제 및 정정이 있는 경우에는 변경사항의 시행 7일 전부터 서비스 내 공지사항을 통하여 고지할 것입니다. 다만, 정보주체의 권리 또는 의무에 중요한 변경이 있는 경우에는 최소 30일 전에 고지하겠습니다.

**부칙**

본 개인정보처리방침 버전: 2.0

공고일자: 2025년 5월 27일

시행일자: 2025년 6월 26일
  `;
}
